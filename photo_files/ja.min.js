var addthis_config={data_track_clickback:false};var browser_width,browser_height,slider_height,scrollTop,scrollBottom,lastScrollTop,historyScrollTop,scrollingToInfo=false,History,human=false,isScrolling=false,menuTimeout,baseURL,pauseScroll=false,navigatingHistory=false,wheelStop,currentSlide=0,totalSliders,totalSlides,scrollDirection,stopScroll=0,mobileSafari=false,introVisible=true,slideDuration=600,sliderIndex,sliderSpreadIndex,$sliderImages,$leftNavText,$rightNavText,moveFlag=false;(function(e){e.fn.loadImage=function(){return this.each(function(){if(!Modernizr.touch||Modernizr.touch&&e(this).is(".spread")&&browser_width>768)var t=e(this).data("original");else var t=e(this).data("medium");var n=e(this);e("<img/>").attr("src",t).imagesLoaded(function(){if(n.is(".fill")){n.css("background-image","url("+t+")").removeClass("loading").addClass("loaded");if(n.is(".fit-on-ios"))n.find("img").attr("src",t)}else{n.find("img").attr("src",t);n.removeClass("loading").addClass("loaded")}})})}})(jQuery);(function(e){e.fn.unLoadImage=function(t){var t=e.extend({unloadFirst:false},t);return this.each(function(n){if(n>0||t.unloadFirst){if(e(this).is(".fill")){e(this).css("background-image","url("+"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"+")");if(e(this).is(".fit-on-ios"))e("img",this).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}else{e("img",this).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}}})}})(jQuery);resizeHandler=function(){var e=browser_width;browser_width=$(window).width();browser_height=$(window).height();if(mobileSafari&&browser_height>320)browser_height+=60;if($("#logo").length)$("#logo").css("margin-left",-$("#logo").width()/2+"px").css("margin-top",-$("#logo").height()/2+"px").removeClass("opacity-zero");if((e>=1024&&browser_width<1024||e<1024&&browser_width>=1024)&&(currentSlide>=1&&currentSlide<=totalSliders||currentSlide==totalSlides-1)){if(browser_width>=1024){var t=$sliderImages.eq(sliderIndex-1);var n=Math.ceil((t.prevAll(".half").length+1)/2)+t.prevAll(".spread").length;$("#slider"+currentSlide).attr("data-spread-index",n);sliderSpreadIndex=n;var r=Math.ceil(t.prevAll(".half.img").length/2)*2+t.prevAll(".spread.img").length;if(r<1)r=1;$("#slider"+currentSlide).attr("data-index",r);sliderIndex=r;$("#caption-total, #caption-total-2").text($("#slider"+currentSlide).attr("data-full-total"));if($("#mobile-menu").hasClass("visible")){$("#everything").transition({x:0},0);$("#mobile-menu").removeClass("visible")}}else{sliderSpreadIndex=sliderIndex+1;$("#slider"+currentSlide).attr("data-spread-index",sliderSpreadIndex);$("#caption-total, #caption-total-2").text($("#slider"+currentSlide).attr("data-total"))}}if(browser_width<768){slideDuration=300;$menuItems=$("#mobile-menu").find("a");$("#mobile-menu").find("a").each(function(){$(this).outerHeight((browser_height+1)/$menuItems.length).css("padding-top",((browser_height+1)/$menuItems.length-14)/2+"px")})}else{slideDuration=600}if(browser_width<1024){$leftNavText=$("#menu h1, #menu a, #caption");$rightNavText=$("#caption-2, #section")}else if(browser_width>=1024&&browser_width<=1400){$leftNavText=$("#menu h1, #caption");$rightNavText=$("#caption-2, #section, #menu a")}else{$leftNavText=$("#menu h1, #menu a, #caption");$rightNavText=$("#caption-2, #section")}if(e>=1024&&browser_width<1024||e<1024&&browser_width>=1024||e>1400&&browser_width<=1400||e<=1400&&browser_width>1400)updateMeta();$(".full").each(function(){var e=$(this).find(".half");var t=$(this).find(".spread");if(browser_width>=1024){$(this).width((e.length/2+t.length)*browser_width).height(browser_height);e.width(browser_width/2).outerHeight(browser_height,true)}else{$(this).width((e.length+t.length)*browser_width).height(browser_height);e.width(browser_width).outerHeight(browser_height,true)}t.width(browser_width).outerHeight(browser_height,true)});$("#everything").transition({y:-currentSlide*browser_height},0);$("#slider"+currentSlide).transition({x:-(sliderSpreadIndex-1)*browser_width},0);$("#mobile-menu").height(browser_height);if(mobileSafari&&browser_height>320){setTimeout(function(){window.scrollTo(0,scrollTop===1?0:1)},500)}};replaceSVGs=function(){$('img[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")})};$(document).ready(function(){if(!Modernizr.inlinesvg)replaceSVGs();if(!Modernizr.touch){$(window).resize(function(){resizeHandler()});if(screenfull.enabled){$("html").addClass("fullscreen")}}else{$("body").bind("orientationchange",function(e){if($("#mobile-menu").is(".visible")){$("#mobile-content").transition({x:0},0);$("#mobile-menu").removeClass("visible")}$("body").addClass("rotating");setTimeout(function(){$(".loaded").unLoadImage({unloadFirst:true});setTimeout(function(){resizeHandler()},300);setTimeout(function(){$(".loaded").loadImage()},600);setTimeout(function(){$("body").removeClass("rotating");updateMeta()},900)},150)})}if((/iPhone/.test(navigator.platform)||/iPod/.test(navigator.platform))&&/Safari/i.test(navigator.userAgent)&&(/6\\.0/i.test(navigator.userAgent)||/5\\.0/i.test(navigator.userAgent))&&!navigator.standalone){$("html").addClass("mobile-safari");mobileSafari=true}if(!$.support.transition)$.fn.transition=$.fn.animate;totalSlides=$(".full").length;totalSliders=$(".slider").length;$allImages=$(".img");currentSlide=0;sliderIndex=1;sliderSpreadIndex=1;$sliderImages=$("#slider"+currentSlide).find(".img");if($("#intro").length)totalSlides-=1;else introVisible=false;resizeHandler();$(".slider").each(function(){$(this).attr("data-full-total",$(".half",this).length/2+$(".spread",this).length);$(this).attr("data-total",$(".img",this).length)});$(".img","#everything").on("inview",function(e,t){if(t==true){$(this).addClass("in-view");var n=$(this);if(n.next(".img").not(".in-view"))n.next(".img").loadImage()}else $(this).removeClass("in-view")});updatePrevNext=function(){setTimeout(function(){$(".next-in-view, .prev-in-view").removeClass("next-in-view prev-in-view");if($(".in-view").length){var e=$(".in-view").last().next(".img");e.addClass("next-in-view");if(!e.is(".spread")&&browser_width>=1024){e.next(".img").addClass("next-in-view")}var t=$(".in-view").first().prev(".img");t.addClass("prev-in-view");if(!t.is(".spread")&&browser_width>=1024){t.prev(".img").addClass("prev-in-view")}}else $sliderImages.eq(0).addClass("next-in-view")},0)};updateMeta=function(){$leftNavText.removeAttr("style");$rightNavText.removeAttr("style");if(currentSlide!=0&&currentSlide!=totalSlides-1)var e=$sliderImages.eq(sliderIndex-1);else var e=$(".opacity-one","#slider"+currentSlide).eq(0);if(sliderSpreadIndex>1&&(e.is(".half")||e.is(".spread")&&browser_width<1024)){if(currentSlide>=1&&currentSlide<=totalSliders){$("#caption-text").text(e.data("caption"));$("#caption-index").text(sliderIndex);$("#caption").removeClass("opacity-zero")}else{$("#caption").addClass("opacity-zero")}if((e.is(".fit-on-ios")||currentSlide==totalSlides-1)&&browser_width<1024)$leftNavText.removeAttr("style");else $leftNavText.css("color",e.data("colour")).css("border-color",e.data("colour"))}else{$("#caption").addClass("opacity-zero");$leftNavText.removeAttr("style")}if(browser_width>=1024&&(e.is(".spread")||e.is(".half")&&e.next().is(".img")||$sliderImages.length==1||$("#slider"+currentSlide).is(".hide-captions"))){if(currentSlide>=1&&currentSlide<=totalSliders){$("#section, #caption-2").removeClass("opacity-zero");$("#section").text($("#slider"+currentSlide).attr("data-section"))}else{$("#section, #caption-2").addClass("opacity-zero")}if((e.is(".spread")||sliderSpreadIndex==1)&&!$("#slider"+currentSlide).is(".hide-captions")){if(currentSlide>=1&&currentSlide<=totalSliders){$("#caption-index-2").text(sliderIndex);$("#caption-text-2").text(e.data("caption"))}if(sliderSpreadIndex==1){$leftNavText.removeAttr("style")}else{$leftNavText.css("color",e.data("colour")).css("border-color",e.data("colour"))}$rightNavText.css("color",e.data("colour")).css("border-color",e.data("colour"))}else{if(currentSlide>=1&&currentSlide<=totalSliders){$("#caption-index-2").text(sliderIndex+1);$("#caption-text-2").text(e.next(".img").data("caption"))}if($("#slider"+currentSlide).is(".hide-captions"))$rightNavText.css("color",e.data("colour")).css("border-color",e.data("colour"));else $rightNavText.css("color",e.next(".img").data("colour")).css("border-color",e.next(".img").data("colour"))}}else{$("#section, #caption-2").addClass("opacity-zero");$rightNavText.removeAttr("style")}if(currentSlide>=1&&currentSlide<=totalSliders){$("#caption-total, #caption-total-2").text($("#slider"+currentSlide).attr("data-total"))}};hideArrows=function(){if(currentSlide==0){$("#arrows").removeClass("opacity-zero");$("#top-arrow, #right-arrow, #bottom-arrow, #left-arrow").addClass("opacity-zero")}else{$("#arrows").addClass("opacity-zero");if(currentSlide>=1&&currentSlide<=totalSliders){var e=$("#slider"+currentSlide);if(browser_width>=1024)var t=parseInt(e.attr("data-full-total"));else var t=parseInt(e.attr("data-total"));if(sliderSpreadIndex==1){if(t>1)$("#right-arrow").removeClass("opacity-zero");else $("#right-arrow").addClass("opacity-zero");$("#left-arrow").addClass("opacity-zero")}else if(sliderSpreadIndex>1&&sliderSpreadIndex<t){$("#right-arrow, #left-arrow").removeClass("opacity-zero")}else{$("#right-arrow").addClass("opacity-zero");$("#left-arrow").removeClass("opacity-zero")}$("#top-arrow, #bottom-arrow").removeClass("opacity-zero")}else if(currentSlide==totalSlides-1){$("#bottom-arrow, #top-arrow, #bottom-arrow").addClass("opacity-zero");$("#top-arrow").removeClass("opacity-zero")}else if(currentSlide==0){$("#top-arrow, #bottom-arrow, #top-arrow, #bottom-arrow").addClass("opacity-zero")}else{$("#top-arrow, #bottom-arrow").removeClass("opacity-zero");$("#right-arrow, #left-arrow").addClass("opacity-zero")}}};updateMenu=function(){$(".selected","#menu").removeClass("selected");if(currentSlide==totalSlides-1)$("#collaborations").addClass("selected");else if(currentSlide==totalSlides-2)$("#about").addClass("selected");else $("#selected").addClass("selected")};resetSlider=function(){var e=$("#slider"+currentSlide);e.transition({x:0},0);sliderIndex=1;sliderSpreadIndex=1;$sliderImages=$("#slider"+currentSlide).find(".img");if(currentSlide>=1&&currentSlide<=totalSliders){e.attr("data-spread-index","1");e.attr("data-index","1");$("body").removeClass("hide-captions")}else{$("body").addClass("hide-captions");$("#section, #caption, #caption-2").text()}updateMeta()};showMobileMenu=function(){$("#section, #caption, #caption-2, #arrows").hide();$("#mobile-menu").addClass("visible");$("#mobile-content").transition({x:150},slideDuration,"easeInOutCubic",function(){moveFlag=false})};hideMobileMenu=function(){$("#mobile-content").transition({x:0},slideDuration,"easeInOutCubic",function(){moveFlag=false;$("#section, #caption, #caption-2, #arrows").show()});setTimeout(function(){$("#mobile-menu").removeClass("visible")},slideDuration+50)};moveRight=function(){if(!moveFlag){moveFlag=true;var e=$("#slider"+currentSlide);if(!$("#mobile-menu").is(".visible")){if(currentSlide>=1&&currentSlide<=totalSliders||currentSlide==totalSlides-1&&browser_width<1024){if(browser_width>=1024)var t=parseInt(e.attr("data-full-total"));else var t=parseInt(e.attr("data-total"));if(sliderSpreadIndex<t&&browser_width>=1024||sliderSpreadIndex<=t&&browser_width<1024){sliderSpreadIndex++;e.attr("data-spread-index",sliderSpreadIndex);var n=$sliderImages.eq(sliderIndex-1);if(browser_width>=1024&&sliderSpreadIndex>2&&n.is(".half")){sliderIndex+=2}else{if(browser_width<1024&&sliderSpreadIndex<=2){}else sliderIndex+=1}e.attr("data-index",sliderIndex);updateMeta();hideArrows();e.transition({x:-(sliderSpreadIndex-1)*browser_width},slideDuration,"easeInOutCubic",function(){moveFlag=false;var e=$(".in-view").last().next(".img");e.loadImage();if(!e.is(".spread")&&browser_width>=1024){e.next(".img").loadImage()}})}else{e.transition({x:-((sliderSpreadIndex-1)*browser_width+30)},200,"easeInOutCubic").transition({x:-(sliderSpreadIndex-1)*browser_width},200,"easeInOutCubic",function(){moveFlag=false})}}else{e.transition({x:-30},200,"easeInOutCubic").transition({x:0},200,"easeInOutCubic",function(){moveFlag=false})}}else{hideMobileMenu()}}};moveLeft=function(){if(!moveFlag){moveFlag=true;var e=$("#slider"+currentSlide);if(!$("#mobile-menu").is(".visible")){if(currentSlide>=1&&currentSlide<=totalSliders||currentSlide==totalSlides-1&&browser_width<1024){if(sliderSpreadIndex>1){sliderSpreadIndex--;e.attr("data-spread-index",sliderSpreadIndex);var t=$sliderImages.eq(sliderIndex-1);if(browser_width>=1024&&sliderSpreadIndex>1&&t.prev().is(".half"))sliderIndex-=2;else{if(browser_width<1024&&sliderSpreadIndex<=1){}else sliderIndex-=1}e.attr("data-index",sliderIndex);updateMeta();hideArrows();e.transition({x:-(sliderSpreadIndex-1)*browser_width},slideDuration,"easeInOutCubic",function(){moveFlag=false})}else{if(browser_width>=768){e.transition({x:30},200,"easeInOutCubic").transition({x:0},200,"easeInOutCubic",function(){moveFlag=false})}else if(!$("#mobile-menu").is(".visible"))showMobileMenu()}}else{if(browser_width>=768)e.transition({x:30},200,"easeInOutCubic").transition({x:0},200,"easeInOutCubic",function(){moveFlag=false});else if(!$("#mobile-menu").is(".visible"))showMobileMenu()}if($("#mobile-menu").is(".visible")&&sliderSpreadIndex>1)hideMobileMenu()}else{moveFlag=false}}};moveUp=function(){if(!moveFlag&&!introVisible){moveFlag=true;if(currentSlide>0){currentSlide--;$("#slider"+currentSlide).addClass("next");resetSlider();$("#everything").transition({y:-currentSlide*browser_height},slideDuration,"easeInOutCubic",function(){$("#slider"+currentSlide).next().find(".img").unLoadImage().removeClass("loaded");moveFlag=false;$(".current").removeClass("current");$("#slider"+currentSlide).addClass("current").removeClass("next")})}else{$("#everything").transition({y:30},200,"easeInOutCubic").transition({y:0},200,"easeInOutCubic",function(){moveFlag=false})}hideArrows();updateMenu();if($("#mobile-menu").is(".visible"))hideMobileMenu()}};moveDown=function(){if(!moveFlag&&!introVisible){moveFlag=true;if(currentSlide<totalSlides-1){currentSlide++;$("#slider"+currentSlide).addClass("next");resetSlider();$("#everything").transition({y:-currentSlide*browser_height},slideDuration,"easeInOutCubic",function(){$("#slider"+currentSlide).prev().find(".img").unLoadImage().removeClass("loaded");moveFlag=false;$(".current").removeClass("current");$("#slider"+currentSlide).addClass("current").removeClass("next")})}else{$("#everything").transition({y:-((totalSlides-1)*browser_height+30)},200,"easeInOutCubic").transition({y:-(totalSlides-1)*browser_height},200,"easeInOutCubic",function(){moveFlag=false})}hideArrows();updateMenu();if($("#mobile-menu").is(".visible"))hideMobileMenu()}};handleScroll=function(e,t){if(isScrolling){stopScroll+=1;if(stopScroll==1){isScrolling=false;clearTimeout(wheelStop);scrollTop=$(window).scrollTop();if(t<0||scrollTop<lastScrollTop)moveDown();else if(t>0||scrollTop>=lastScrollTop)moveUp();wheelStop=setTimeout(function(){stopScroll=0},1500);lastScrollTop=scrollTop}}};if(Modernizr.touch){$("#everything").hammer({drag_min_distance:30}).on("swipe dragstart",function(e){if(e.gesture.direction=="down"){moveUp()}else if(e.gesture.direction=="up"){moveDown()}else if(e.gesture.direction=="left"){moveRight()}else{moveLeft()}e.gesture.preventDefault()}).on("hold",function(e){if(browser_width<768){if(!$("#mobile-menu").hasClass("visible")){showMobileMenu()}else{hideMobileMenu()}}})}$("#top-arrow").hammer().on("tap",function(e){moveUp()});$("#bottom-arrow").hammer().on("tap",function(e){moveDown()});$("#right-arrow").hammer().on("tap",function(e){moveRight()});$("#left-arrow").hammer().on("tap",function(e){moveLeft()});$(document).keydown(function(e){switch(e.keyCode){case 39:moveRight();return false;break;case 37:moveLeft();return false;break;case 38:e.preventDefault();moveUp();return false;break;case 40:e.preventDefault();moveDown();return false;break;case 70:e.preventDefault();if(screenfull.enabled){var t=$("#fullscreen")[0];if(screenfull.isFullscreen){screenfull.exit();$("body").removeClass("fullbody")}else{screenfull.request(t);$("body").addClass("fullbody")}}break}});$(document).on("mousewheel",function(e,t){isScrolling=true;if(Math.abs(t)>=40)t/=40;handleScroll(e,t);e.preventDefault();e.stopPropagation()});if(Modernizr.touch){window.addEventListener("touchmove",function(e){e.preventDefault()});window.addEventListener("touchend",function(e){e.preventDefault()})}$("#menu").hammer().on("tap","h1, a",function(e){if(browser_width>=768&&currentSlide!=$(this).attr("data-scrollto")){if(!$(this).hasClass("selected")&&!$(this).is("h1")){$(".selected","#menu").removeClass("selected");$(this).addClass("selected")}else if($(this).is("h1")&&!$("#selected").hasClass("selected")){$(".selected","#menu").removeClass("selected");$("#selected").addClass("selected")}currentSlide=$(this).attr("data-scrollto");resetSlider();$("#everything").transition({y:-$(this).attr("data-scrollto")*browser_height},slideDuration,"easeInOutCubic",function(){$(".current").find(".img").unLoadImage().removeClass("loaded");moveFlag=false;$(".current").removeClass("current");$("#slider"+currentSlide).addClass("current")});hideArrows()}e.preventDefault()});$("#mobile-menu-toggle").hammer().on("tap",function(e){if(!$("#mobile-menu").hasClass("visible")){showMobileMenu()}else{hideMobileMenu()}});$("#mobile-menu").hammer().on("tap","a",function(e){if(!$(this).hasClass("selected")){$(".selected","#menu").removeClass("selected");$(this).addClass("selected")}currentSlide=$(this).attr("data-scrollto");resetSlider();$("#everything").transition({y:-$(this).attr("data-scrollto")*browser_height},slideDuration,"easeInOutCubic",function(){$(".current").find(".img").unLoadImage().removeClass("loaded");moveFlag=false;$(".current").removeClass("current");$("#slider"+currentSlide).addClass("current")});hideMobileMenu();hideArrows();return false});$("#collaborators-menu, #intro-menu").each(function(){var e="#"+$(this).attr("id");$(this).hammer().on("tap",".clickable",function(t){if(e=="#intro-menu"){currentSlide=$(this).attr("data-scrollto");resetSlider();$("#everything").transition({y:-$(this).attr("data-scrollto")*browser_height},slideDuration,"easeInOutCubic",function(){$(".current").find(".img").unLoadImage().removeClass("loaded");moveFlag=false;$(".current").removeClass("current");$("#slider"+currentSlide).addClass("current")});hideArrows()}else{if(browser_width<1024)moveRight();if($(this).is("h2"))var n=$(this).parent();else var n=$(this);if(!n.hasClass("text-in-view")){var r=0;if($(".text-in-view",e).length){$(".text-in-view",e).removeClass("text-in-view");if(browser_width>=768)r=500}$(".open","#"+$(this).data("slideshow")+"-slideshow").removeClass("open");$("#slide"+$(this).data("slide")).addClass("open");setTimeout(function(){n.addClass("text-in-view")},r)}else{n.removeClass("text-in-view")}if(Modernizr.touch){var i=$(".opacity-one","#"+$(this).data("slideshow")+"-slideshow");if(i.length)i.removeClass("opacity-one");$("#slide"+$(this).data("slide")).addClass("opacity-one");updateMeta()}}}).on("mouseenter",".clickable",function(e){var t=$(".opacity-one","#"+$(this).data("slideshow")+"-slideshow");if(t.length)t.removeClass("opacity-one");$("#slide"+$(this).data("slide")).addClass("opacity-one");updateMeta()}).on("mouseleave",".clickable",function(e){var t=$(".open","#"+$(this).data("slideshow")+"-slideshow");if(t.length)$(".opacity-one","#"+$(this).data("slideshow")+"-slideshow").removeClass("opacity-one");t.addClass("opacity-one")})});$("a[rel=external], a[href^='http:']:not([href*='"+window.location.host+"']), a[href^='https:']:not([href*='"+window.location.host+"'])").each(function(){$(this).attr("target","_blank")})});$(window).load(function(){if($("#intro").length){setTimeout(function(){$("#intro").transition({y:-browser_height},slideDuration,"easeInOutCubic",function(){$("#intro").remove();introVisible=false;$(".full").each(function(e,t){setTimeout(function(){$(t).find(".img").eq(0).loadImage()},100*e)})});updateMeta();$("#arrows, #right-menu, #heading").removeClass("opacity-zero")},2e3)}$("#slider0").find(".img").eq(0).loadImage()})